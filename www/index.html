<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name = "format-detection" content = "telephone=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" 
      content="user-scalable=no, initial-scale=1, maximum-scale=1, 
        minimum-scale=1, width=device-width" />
    <title>SpiderOak Mobile</title>
    <link rel="stylesheet" type="text/css" href="css/icomoon/style.css" />
    <link rel="stylesheet" type="text/css" href="css/app.css" />
    <link rel="stylesheet" type="text/css" href="css/themes/android.css" />
    <script src="components/zepto/zepto.js"></script>
    <script src="components/yepnope/yepnope.js"></script>
    <script type="text/javascript">
    // @FIXME: THIS NEEDS TO BE EITHER COMPILE TIME, OR FIXED
      // yepnope({
      //   test : $.os.android,
      //   yep  : [
      //     'css/themes/android.css'
      //   ],
      //   nope : [
      //     // force android for now..
      //     // 'css/themes/ios.css'
      //     'css/themes/android.css'
      //   ],
      //   complete: function(url, result, key) {
      //     $('body').addClass((result)?"android":"ios");
      //     // @FIXME: This seems cludgey
      //     if (navigator.splashscreen) {
      //       navigator.splashscreen.hide();
      //     }
      //     window.setTimeout(function(){
      //       $(".splash").hide();
      //     },500);
      //     window.cssLoaded = true;
      //   }
      // });
    </script>
  </head>
  <body ontouchstart="">
    <div id="app" class="app">
      <div id="menusheet" class="menu"></div>
      <div id="main" class="main">
        <div id="nav" class="nav">
          <a class="menu-btn"></a>
          <a class="back-btn"></a>
          <div class="title">SpiderOak</div>
        </div>
        <div id="subviews" class="page"></div>
      </div>
      <!-- Login view needs to be ready as early as possible... 
        might not want it in a template -->
      <div id="login" class="login">
        <!-- @FIXME: inline styles are fail -->
        <img src="img/brand_logo.png" 
          style="display:block; width:100px;margin: 10px auto;" />
        <form class="login-form">
          <div class="login-input">
            <input id="unme" type="text" name="unme"
                       autocorrect="off" autocapitalize="off" 
                       placeholder="Username" />
          </div>
          <div style="height:5px;"></div>
          <div class="login-input">
            <input id="pwrd" type="password" name="pwrd"
                       placeholder="Password" />
          </div>
          <a class="button loginButton">Log in</a>
          <a class="button shareRoomsButton">Go to ShareRooms</a>
          <input type="submit" style="visibility:hidden" />
        </form>
      </div>
    </div>
    <div class="splash"><img src="img/brand_logo.png" width="100%" /></div>
    <!-- Cordova -->
    <script src="cordova.js"></script>
    <script src="cordova-polyfills.js"></script>
    <script src="FileViewerPlugin.js"></script>
    <!-- Components -->
    <script src="components/underscore/underscore.js"></script>
    <script src="components/backbone/backbone.js"></script>
    <script src="components/backbone.basicauth/backbone.basicauth.js"></script>
    <script src="components/backstack/backstack.js"></script>
    <script src="components/Nibbler.min/index.js"></script>
    <script src="components/iscroll/src/iscroll.js"></script>
    <script src="components/store.js/store.min.js"></script>
    <script src="components/moment/moment.js"></script>
    <!-- SpiderOakMobile script -->
    <script src="js/SpiderOakMobile.js"></script>
    <!-- initialization -->
    <script type="text/javascript">
      tpl.loadTemplates(
        'tpl',
        [
          'menusheetTemplate',
          'favoritesViewTemplate',
          'recentsViewTemplate',
          'folderViewTemplate',
          'folderItemViewTemplate',
          'shareRoomsRootViewTemplate',
          'shareRoomItemViewTemplate',
          'fileItemViewTemplate',
          'androidContextPopup',
          'progressDialog',
          'waitDialog'
        ],
        function() {
          window.spiderOakApp && window.spiderOakApp.initialize();
        }
      );
    </script>
  </body>
</html>
